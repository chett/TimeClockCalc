function addAnInterval(e,t,n,r,i,s){e===undefined&&(e=""),t===undefined&&(t=""),n===undefined&&(n="AM"),r===undefined&&(r=""),i===undefined&&(i=""),s===undefined&&(s="AM");var o=new Date,u='<input class="input-mini" maxlength="2" size="2" type="text" id="toHour" value="'+r+'" />',a='<input class="input-mini" maxlength="2" size="2" type="text" id="toMinute" value="'+i+'" />',f='<select class="span2" id="toAMPM">'+generateAMPMOptionHTML(s)+"</select>",l=u+":"+a+f,c='<input class="input-mini" maxlength="2" size="2" type="text" id="fromHour" value="'+e+'" />',h='<input class="input-mini" maxlength="2" size="2" type="text" id="fromMinute" value="'+t+'" />',p='<select class="span2" id="fromAMPM">'+generateAMPMOptionHTML(n)+"</select>",d=c+":"+h+p,v='<button class="btn" type="button" id="remove">Remove Interval</button>',m='<div class="input-append" id="interval'+intervalNumber+'">'+d+" to "+l+v+"</div>";$("div#intervals").append(m),$("input").keyup(function(){computeElapsedTime()}),$("select").change(function(){computeElapsedTime()}),$("div#intervals>#interval"+intervalNumber+">#fromMonth").change(function(){onDateOrYearChange($(this).parent().children("#fromDay"),$(this).parent().children("#fromMonth"),$(this).parent().children("#fromYear"))}),$("div#intervals>#interval"+intervalNumber+">#toMonth").change(function(){onDateOrYearChange($(this).parent().children("#toDay"),$(this).parent().children("#toMonth"),$(this).parent().children("#toYear"))}),$("div#intervals>#interval"+intervalNumber+">#remove").click(function(){removeAnInterval($(this).parent())}),intervalNumber++,computeElapsedTime()}function generateAMPMOptionHTML(e){var t="",n=["AM","PM"];for(choice in n)t=t+'<option value="'+n[choice]+'"',n[choice]==e&&(t+=" selected"),t=t+">"+n[choice]+"</option>";return t}function hasScheduleStoredInLocalStorage(){return localStorage.getItem("tcc-schedule")==null?!1:!0}function loadFromLocalStorage(){var e=JSON.parse(localStorage.getItem("tcc-schedule"));for(interval in e.intervals){var t=e.intervals[interval].from,n=e.intervals[interval].to;addAnInterval(t.hour,t.minute,t.ampm,n.hour,n.minute,n.ampm)}}function saveToLocalStorage(){var e={intervals:[]};$.each($("#intervals>div"),function(t,n){var r=new Time($(this).children("#fromHour").val(),$(this).children("#fromMinute").val(),$(this).children("#fromAMPM").val()),i=new Time($(this).children("#toHour").val(),$(this).children("#toMinute").val(),$(this).children("#toAMPM").val());e.intervals.push(new TimeInterval(r,i))}),localStorage.setItem("tcc-schedule",JSON.stringify(e))}function removeFromLocalStorage(){localStorage.removeItem("tcc-schedule")}function onDateOrYearChange(e,t,n){$(e).html(updateDateSelect($(t).val(),1,$(n).val()))}function daysInMonth(e,t){return(new Date(e,t,0)).getDate()}function updateDateSelect(e,t,n){var r=daysInMonth(n,parseInt(e)+1),i="";for(var s=1;s<=r;s++)i=i+'<option value="'+s+'">'+s+"</option>";return i}function promptRemoveAllDialog(){$("#removeallwarn").dialog({buttons:{Continue:function(){removeAllIntervals(),removeFromLocalStorage(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}})}function removeAllIntervals(){$.each($("#intervals>div"),function(e,t){$(this).remove()}),addAnInterval(),computeElapsedTime(),setResult("0 minutes")}function removeAnInterval(e){$("#intervals>div").length>1&&(e.remove(),computeElapsedTime())}function computeElapsedTime(){var e=0,t=0;$.each($("#intervals>div"),function(n,r){if($(this).children("#fromHour").val()==""||$(this).children("#toHour").val()==""||$(this).children("#fromMinute").val()==""||$(this).children("#toMinute").val()==""){console.log($(this).children("#fromHour").val());return}var i=parseInt($(this).children("#fromHour").val()),s=parseInt($(this).children("#fromMinute").val()),o=$(this).children("#fromAMPM").val(),u=parseInt($(this).children("#toHour").val()),a=parseInt($(this).children("#toMinute").val()),f=$(this).children("#toAMPM").val(),l,c;a<s&&(u--,a+=60),l=a-s,f=="PM"&&(u+=12),o=="PM"&&(i+=12),u<i&&(u+=24),c=u-i,t+=l,e+=c}),t>=60&&(e+=parseInt(t/60),t-=parseInt(t/60)*60);if(e==0&&t==0)return;setResult(e+" hours, "+t+" minutes"),saveToLocalStorage()}function setResult(e){$("#result").html(e)}var intervalNumber=0;Time=function(e,t,n){this.hour=e,this.minute=t,this.ampm=n},TimeInterval=function(e,t){this.from=e,this.to=t},$(document).ready(function(){hasScheduleStoredInLocalStorage()?loadFromLocalStorage():addAnInterval()});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-33299540-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();